<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title> vim</title><meta name="description" content="Vim的一些插件和工具"><link rel="canonical" href="http://localhost:4000/posts/vim_tool/"><link rel="alternate" type="application/rss+xml" title="JiYang's Blog" href="http://localhost:4000/feed.xml"><link href='https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|Roboto+Condensed:700&subset=latin' rel='stylesheet' type='text/css'><link rel="stylesheet" href="/assets/css/main.css"><meta property="og:url" content="http://localhost:4000/posts/vim_tool/"><meta property="og:type" content="website"><meta property="og:title" content="vim工具"><meta property="og:description" content=""><meta property="og:site_name" content="JiYang's Blog"><meta name="twitter:card" content="summary"><meta name="twitter:url" content="http://localhost:4000/posts/vim_tool/"><meta name="twitter:title" content="vim工具"><meta name="twitter:description" content=""><meta property="og:image" content="http://localhost:4000/assets/images/vim.png"><meta name="twitter:image" content="http://localhost:4000/assets/images/vim.png"><body><div id="shadow"></div><header class="main-header content-wrapper"> <input type="checkbox" id="menu-checkbox" /><nav class="center-wrapper nav-main"> <a class="blog-logo" href="/">JiYang's Blog</a> <a href="/about/">About</a> <a href="/posts/">Archive</a>  <label for="menu-checkbox" class="toggle-button" data-open="☰" data-close="☰" onclick></label></nav></header><aside class="sidebar" role="note" style="background-image: url(/assets/images/vim.png)"><div class="cover"><div class="cover-text"><div class="heading"> <a href="/posts/#vim">vim</a></div><p></div></div><div id="switcher"></div></aside><main class="content-wrapper blog-content"><article class="post"><h1 class="post-title">vim工具</h1><p class="post-meta"> <time datetime="2019-04-25">25-04-2019</time> &nbsp;/&nbsp; <span>宋天</span><div class="post-content"><p>Vim的一些插件和工具<h4 id="ctags">ctags</h4><ul><li>c语言代码标签功能<li><code class="highlighter-rouge">brew install ctags</code>命令安装在macos下<li><code class="highlighter-rouge">ctags *.rb</code> 在命令行生成标签文件<li><code class="highlighter-rouge">:!ctags -R</code> 在vim内生成标签文件<li><code class="highlighter-rouge">:nnoremap &lt;f5&gt; :!ctags -R&lt;CR&gt; </code>将生成标签文件映射为f5键<li><code class="highlighter-rouge">:autocmd BufWritePost * call system("ctags -R")</code> 文件保存的时候自动执行</ul><table><thead><tr><th>命令<th>作用<tbody><tr><td><code class="highlighter-rouge">C-]</code><td>跳转到代码的定义出<tr><td><code class="highlighter-rouge">C-t</code> <code class="highlighter-rouge">:pop</code><td>按照原来的标签历史返回<tr><td><code class="highlighter-rouge">gC-]</code><td>如果有多个定义，则会显示一个列表让你选择<tr><td><code class="highlighter-rouge">:tselect</code><td>拉取出可供选择的定义列表<tr><td><code class="highlighter-rouge">:tprev</code> <code class="highlighter-rouge">:tnext</code> <code class="highlighter-rouge">:tfirst</code> <code class="highlighter-rouge">:tlast</code><td>跳转到相应的定义<tr><td><code class="highlighter-rouge">:tag {keyword}</code> <code class="highlighter-rouge">:tjump {keyword}</code><td>与<code class="highlighter-rouge">C-]</code> <code class="highlighter-rouge">gC-]</code>相似的命令，不用将光标放到关键字上面去, 可以使用正则表达式（前面以/开头）</table><h4 id="编译和使用quickfix排错">编译和使用quickfix排错</h4><ul><li><code class="highlighter-rouge">:make</code>命令编译，当出现错误时会跳转到第一个错误的位置<li><code class="highlighter-rouge">:cnext</code>跳转到下一个错误位置，:prev跳转到第一个错误位置</ul><table><thead><tr><th>命令<th>作用<tbody><tr><td><code class="highlighter-rouge">cnext</code> <code class="highlighter-rouge">cprev</code> <code class="highlighter-rouge">cfirst</code> <code class="highlighter-rouge">clast</code><td>跳转到相应位置，cnext和cprev前面可以增加数字<tr><td><code class="highlighter-rouge">cnfile</code><td>下一个文件的第一个位置<tr><td><code class="highlighter-rouge">cpfile</code><td>上一个文件的最后一个位置<tr><td><code class="highlighter-rouge">cc N</code><td>跳转到第N个位置<tr><td><code class="highlighter-rouge">copen</code> <code class="highlighter-rouge">cclose</code><td>打开关闭quickfix列表<tr><td><code class="highlighter-rouge">cdo {cmd}</code><td>对quicklist中的每行执行一个命令<tr><td><code class="highlighter-rouge">cfdo {cmd}</code><td>对quicklist中的每一个文件执行一个命令</table><h4 id="使用makeprg设置编译器">使用makeprg设置编译器</h4><ul><li><code class="highlighter-rouge">setlocal makeprg=NODE_DISABLE_COLORS=1\ nodelint\ %</code> 这是一个js的编译器nodelint，可以使用<code class="highlighter-rouge">:make</code>命令编译，比如java,<code class="highlighter-rouge">setlocal makeprg=javac %</code> %代表当前文件</ul><h4 id="在项目中搜索">在项目中搜索</h4><ul><li>grep在vim中和vim外使用的区别是，vim中会将结果写入quickfix，很方便跳转<li><code class="highlighter-rouge">vim [ grep ][!] /{pattern}/ [ g ][ j ] { file } ...</code> vim内部搜索引擎 vimgrep,可以使用通配符，特殊##代表参数列表的文件，可以将搜索域置空使用当前模式</ul><h4 id="自动补全">自动补全</h4><table><thead><tr><th>命令<th>作用<tbody><tr><td><code class="highlighter-rouge">&lt;C-n&gt; </code><td>Generic keywords<tr><td><code class="highlighter-rouge">&lt;C-x&gt;&lt;C-n&gt;</code><td>Current buffer keywords<tr><td><code class="highlighter-rouge">&lt;C-x&gt;&lt;C-i&gt;</code><td>导入文件关键字，c的include，python的from import等，vim能分辨支持的语言<tr><td><code class="highlighter-rouge">&lt;C-x&gt;&lt;C-]&gt;</code><td>标签关键字，由ctags生成的文件中的关键字<tr><td><code class="highlighter-rouge">&lt;C-x&gt;&lt;C-k&gt;</code><td>字典查找，最简单的方法是<code class="highlighter-rouge">set spell</code>开启vim拼写检查<tr><td><code class="highlighter-rouge">&lt;C-x&gt;&lt;C-l&gt;</code><td>行补全，相比复制的优点是我们不必知道复制的内容是从哪来的,vim将会忽略所有行前的缩进<tr><td><code class="highlighter-rouge">&lt;C-x&gt;&lt;C-f&gt;</code><td>文件名补全，与当前路径有关<tr><td><code class="highlighter-rouge">&lt;C-x&gt;&lt;C-o&gt;</code><td>全方位（泛）补全 omni-completion 可以查找相关语言的<tr><td><code class="highlighter-rouge">&lt;C-x&gt;&lt;C-p&gt;</code><td>vim会从原始匹配的地方继续查找剩下单词，也就是说，补全多个单词</table><table><thead><tr><th>命令<th>作用<tbody><tr><td><code class="highlighter-rouge">&lt;C-n&gt;</code><td>下一个候选词<tr><td><code class="highlighter-rouge">&lt;C-p&gt;</code><td>上一个候选词<tr><td><code class="highlighter-rouge">&lt;Down&gt;</code><td>下一个候选词<tr><td><code class="highlighter-rouge">&lt;Up&gt;</code><td>上一个候选词<tr><td><code class="highlighter-rouge">&lt;C-y&gt;</code><td>接受当前的单词<tr><td><code class="highlighter-rouge">&lt;C-e&gt;</code><td>退出自动补全，返回原始的单词输入处<tr><td><code class="highlighter-rouge">&lt;C-h&gt;</code> <code class="highlighter-rouge">&lt;BS&gt;</code><td>删除一个字符<tr><td><code class="highlighter-rouge">&lt;C-l&gt;</code><td>增加一个字符安<tr><td><code class="highlighter-rouge">{char}</code><td>停止补全并插入</table><ul><li><code class="highlighter-rouge">C-p</code>和<code class="highlighter-rouge">&lt;Up&gt;</code>的区别是up选择时文档中的内容不变，知道我们按回车之后，而C-p文档中的内容在不断变化，我们可以接着输入其他字符<li><code class="highlighter-rouge">C-nC-p</code>两个命令连起来能保持文档中的内容不变弹出候选项，并在我们继续输入的时候实时更新候选项列表<li>自定义通用补全设置 <code class="highlighter-rouge">:set complete-=i</code> 为禁用include关键字，默认为<code class="highlighter-rouge">.,w,b,u,t,i </code> , <code class="highlighter-rouge">:set complete+=k</code> 为打开拼写字典补全</ul><h4 id="拼写检查">拼写检查</h4><ul><li><code class="highlighter-rouge">:set spell</code>开启检查，使用<code class="highlighter-rouge">[s</code><code class="highlighter-rouge">]s</code>在错误单词间移动,<code class="highlighter-rouge">z=</code>让vim显示可能正确的单词列表，可以选择或者忽视<li><code class="highlighter-rouge">setlocal spelllang=en_us</code><li><code class="highlighter-rouge">setlocal spellfile=~ /.vim/ spell / en .utf-8.add</code><li><code class="highlighter-rouge">setlocal spellfile+=~ /books/ practical_vim/jargon.utf-8.add</code><li>上面三条命令可以设置vim额外拼写检查文件，例如一些vim的专属单词<li>插入模式可以使用<code class="highlighter-rouge">&lt;C-x&gt;&lt;C-s&gt;</code>或者<code class="highlighter-rouge">&lt;C-x&gt;s</code>来进行修改光标之前的错误单词</ul><table><thead><tr><th>命令<th>作用<tbody><tr><td><code class="highlighter-rouge">]s</code><td>下一个错误单词<tr><td><code class="highlighter-rouge">[s</code><td>上一个错误单词<tr><td><code class="highlighter-rouge">z=</code><td>为当前错误单词现实建议<tr><td><code class="highlighter-rouge">zg</code><td>将当前单词增加到拼写文件<tr><td><code class="highlighter-rouge">zw</code><td>将当前单词移除拼写文件<tr><td><code class="highlighter-rouge">zug</code><td>对于当前单词撤销zg或者zw命令</table><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>" 基于缩进或语法进行代码折叠
"set foldmethod=indent
set foldmethod=syntax
" 启动 vim 时关闭折叠代码
set nofoldenable
</code></pre></div></div><p>操作：za，打开或关闭当前折叠；zM，关闭所有折叠；zR，打开所有折叠。<h4 id="一个介绍vim插件的文章强烈推荐">一个介绍vim插件的文章，强烈推荐</h4><p>https://github.com/yangyangwithgnu/use_vim_as_ide<div class="post-links"> <a class="link-to-post" href="/posts/mongodb_aggregate/"> <span class="link-to-post__next">&#10535; &nbsp;Next post</span> <span class="link-to-post__title">mongodb聚合操作</span> </a> <a class="link-to-post" href="/posts/vim_pattern/"> <span class="link-to-post__prev">&#10535; &nbsp;Previous post</span> <span class="link-to-post__title">vim模式</span> </a></div></div></article></main><footer class="blog-footer content-wrapper"><p>&copy; <span class="full-year"></span> JiYang's Blog</footer><script src="/assets/js/scripts.js"></script>
