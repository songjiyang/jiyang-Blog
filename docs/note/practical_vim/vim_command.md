#### 一般模式命令
命令    | 作用
---|---
`. `| 重复上一次改变,简单而又强大的一个命令
`i`|在当前光标前面进入插入模式
`I`|在行前进入插入模式,相当于0i
`o`|在下一行进入插入模式
`O`|在上一行进入插入模式
`a`|在当前光标后面进入插入模式
`A`|在当前行末尾进入插入模式，相当于$a，`.`命令可以记录此命令
`f{character}`|查找当前行的任意字符，`;`可以向后重复查找，`，`可以向前重复查找
`t`|与f相似，不过光标会留在查找的字符前面
`F`|向当前行前面查找
`T`|向当面行前面查找，光标会停留在字符后面
`s`|删除光标所在字符，并进入插入模式，`f`-`s`-`;`-`.`形成重复查找替换连招
`*`|向后查找当前光标下的单词
`C-a`| 光标在数字上时，加1，可以配合数字键加n,当光标不在数字上时，会向行尾方向查找数字，如果找到则加n
`C-x`| 同上，减一
`zz`| 将光标所在行移到屏幕中央，显示该行上面和下面多行的内容
`J`| 将当前行与上一行合并
`K`| 查看光标所在单词的manual，相当于man word
`ga`|获取光标字符的十进制，十六进制，八进制
`u`,`C-r`|撤销和重做
`C-o`|返回光标原来的位置，相当于后退，只有跳转的位置才会记录，移动不会，跳转在下面有解释
`C-r`|返回光标后来的位置，相当于前进
`C-f`|向前翻页
`C-b`|向回翻页
`C-g`|显示当前文件的名称和状态

- vim -u NONE -N  
vim不加载.vimrc启动并且不进入vi兼容模式
- 在插入模式的改变可以通过一般模式的u来返回，在插入模式上下左右移动光标再改变会记作多次改变，通过u返回时需要按多次，同时dot命令的上一次改变也会变成光标最后一次移动之后的改变
- set nrformats  
这个命令会将所以数字认为是可数的，不管它是否前面被填充了0
- :set shiftwidth=4 softtabstop=4 expandtab  
设置tab为4个空格
#### 移动命令和操作符
操作符 | 作用
---|---
`c`| 更改
`d` | 删除
`y` | 复制到注册器（register）
`g~` | 切换大小写
`gu`| 改为小写
`gU` | 改为大写
`>` | 右移，行操作
`<` | 左移，行操作
`=` | 对齐
`!` | Filter {motion} lines through an external program
- 这些命令都是配合motion命令或者字符对象的,重复两次是对行进行操作的

移动 | 作用
---|---
`w` | 一个单词，光标到末尾，移到下一个的单词头
`b` | 移动到单词开始位置，移到上一个单词头
`e` | 移动到下一个单词结束位置
`ge`| 移动到上一个单词结束位置
`W`,`B`,`E`,`gE`|同上，范围为WORD，WORD的内容比单词大，包含一些特殊字符
`gg`=`G` | 到最后一行，加数字到指定行,1G表示第一行
`0` | 行头
$ | 行尾
`^`| 非空白的行头
`j`,`k`,`h`,`l`|上下左右
`gj`,`gk`|在展示行之间移动，展示行是原本为一行的内容由于窗口宽度的限制被折叠为两行
`g^`,`g0`,`g$`|对应展示行的非空白行头，行头，行尾
`/{character+}`|查找命令，排斥motion,不包含光标所在单词
`%`|在大小中括号间跳转

字符对象(:h text-objects)| 作用
---|---
`aw` | 一个单词，词头到词尾，包含两端空白
`iw` | 一个单词，词头到词尾，不包含空白
`aW` `iw` | 一个WORD，差异如上
`as` `is` | 一个句子
`ap` `ip` | 一个段落
`a[` `a]` | []之内的内容，包括[]
`i[` `i]` | []之内的内容，不包括[]
`a(` `a)` `ab` `i(` `i)` `ib` | ()之内的内容，差异如上
`a<` `a>` `i<` `i>`|<>之内的内容
`at` `it`|`<html></html>`之内的内容
`a{` `a}` `aB` `i{` `i}` `iB` | {}之内的内容
`a"` `a'` <code>a&#96;</code> `i"` `i'` <code>i&#96;</code>| 双单引号和撇号
- 不可单独使用，可以配合虚拟模式或者operator


常用搭配 | 作用
---|---
`cw`| 删除一个单词并进入插入模式，光标位于单词前 `d(n)w` `(n)dw`  `dw`实现删除多个单词
`dw` | 删除一个单词，光标位于单词前
`db` | 删除光标所在单词起始至光标处
`daw`|删除一个单词和空白，光标在单词前至末尾的任意位置
`dap`|删除一个段落
`>G` | 将当前行至末尾行前加入制表符
`xp` | 交换两个字符的位置，先删除，后粘贴
`ddp`| 交换两行的位置
`yyp`| 复制一行
#### 插入模式命令
命令 | 作用
---|---
`c-h` | 删除一个字符,可用于bash shell
`c-w` | 删除一个单词，光标至单词头,可用于bash shell
`c-u` | 删除一行,可用于bash shell
`c-o` | 进入插入一般模式(insert-normal mode)，再执行一个normal命令之后进入插入模式，便于在插入模式中有少量一般模式的命令要使用
`C-r{register}`|可以在插入模式将y命令存入的内容复制出来
`C-r=`|表达式注册，可以在插入模式进行计算
`C-v`|可以输入任何字符，ascll或者unicode，十进制或者十六进制
`C-k{character}{character}` |  图形化显示字符,`:h digraphs-default`显示可用字符
`R`|进入替换模式，`r`为一次替换模式(single-shot)
`gR`|进入虚拟替换模式，将tab视为8个字符或者4个字符，而不是一个字符,gr为一次虚拟替换模式

#### 虚拟模式命令
命令| 作用
---|---
`v`  | 字符虚拟模式
`V`  | 行虚拟模式
`C-v`| 区块虚拟模式
`gv` | 上一次虚拟模式,且选中上次的文本
`o`  | 光标移到高亮文本的另一端,fixed端到free端

`h`,`j`,`k`,`l`移动将文本选择，使用operator进行操作，例如`d`,`y`,`c`


这三种虚拟模式可以相互切换，按哪个键进去按哪个键退去，都可以使用`Esc`和`C-[`退出

tips: dot`.`命令可以重复虚拟模式的选中和改变

#### 行命令模式

历史：最早是ed,ed是ex之父，ex是vi之父，vi是vim之父，所以执行的命令叫Ex command

命令 | 作用
---|---
`:write` `:w`|保存文件
`:edit` `:e`|重新编辑当前文件，e!将会放弃当前更改
`:quit` `:q`|退出
`:` `/ ` `C-r=` | 进入行命令模式
`:[range]delete [x]`|删除特定区域的内容，放入注册器（理解为粘贴板就好了）
`:[range]yank [x]` |复制特定的行放入注册器
`:[line]put [x]`|将注册器内容拷出放入指定的行后面(这一点与p不同，p的内容粘贴位置取决于复制的内容是行范围还是字符范围)
`:[range]copy {address}`|将选中范围的内容复制到address行的下面，`:co` `:t`为缩写
`:[range]move {address}`|将选中范围的内容移动到address行的下面, `:mo` `:m`为缩写
`:[range]join` | 连接指定的行
`:[range]normal {commands}` |对每个特定行都执行一条一般模式命令
`:[range]substitute/{pat-tern}/{string}/[flags]`|匹配的内容进行替换为string
:!commond|执行shell命令    例如`:!ls`  而 `:ls`指的是显示缓存列表里面的内容
`:shell`|进入vim产生的shell中，可以执行多条命令，exit退出
`:read !cmd`|   将命令输出写入缓存
`:write !cmd`|  将缓存内容作为标准输入
- [range] {address}
    1. n表示选中某行
    2. <start>,<end>表示start到end行
    3. dot`.`表示当前行
    4. %表示所有行（在替换中很常见，%s/a/b/）
    5. $表示结束行
    6. '<,'>表示虚拟模式中选中开始行到结束行（是以行为单位的，即使只选中了行内几个字符）
    7. `:/<html>/,/<\/html>/p`表示选中包含`<html>`内容的行开始，包含`</html>`内容的行结束的选区(同样以行为单位)
    8. {address}+n  +和-分别表示前后n行，n可省，默认为1
    9. range为当前行时可省略
    10. address为0时表示开头,某些情况下有用，比如复制一部分内容到文件开头，就是0行后面
- `@:`表示重复上次Ex命令
- `Tab`可以自动补全命令，可以在多个候选词中循环选中,`S-Tab`可以返回上一个候选词，`C-d`可以显示候选词列表
- `C-r C-w`可以复制光标下的单词到命令行，`C-r C-w`可以复制光标下的WORD到命令行，WORD为非空白的一串字符
- viminfo文件记录历史，vimrc文件记录初始化命令，`:h viminfo`或者`:h vimrc`可以查看
- `q:`显示历史命令列表（表示经常按错出现这个列表，只知道:q能退出，不知道有什么用），可以选中历史命令执行，可以查找和修改，就像一个子vim窗口 ，按`q/`可以进入只有搜索历史的窗口列表
- %代表的文件名本身
- [range]可以作为外部程序的标准输入，可进行过滤，排序等
- `:set {option}` 前面加no代表关闭，后面加!代表切换，?代表查看，&代表重置


标记| 作用
---|---
`m[a-zA-Z]`| 标记当前位置，小写是此缓存内的标记，大写是全局标记（不同文件之间）
`'m{character}`|跳转到标记位置非空白行头
<code>&#96;m</code>| 跳转的标记位置
<code>``</code>|在当前行内跳转到上一次所在位置（对应该行的）
<code>`.</code>|上一次改变的地方
<code>`^</code> |上一次插入的地方
<code>gi</code>|从上一次插入的地方进入插入模式
<code>`[</code>|改变或者复制的起始地方
<code>`]</code>|改变或者复制的结束地方
<code>`<</code>|虚拟区域的开头
<code>`></code>|虚拟区域的结尾

跳转| 作用
---|---
`nG`|跳转到指定行
`/pattern` `?patter` `n` `N`|正向反向查找
`%`|匹配的符号，大小中括号
`(` `)`|句子开头和结尾
`{` `}`|段落开头和结尾
`H` `M` `L` |屏幕的头部，中部和底部
`gf`|打开光标下的文件
`C-]`|跳转到光标下的关键字
`'mark` <code>`mark</code>|跳转到指定的标记
- :set suffixesadd+=.rb  设置文件的尾缀，可以用于gf的跳转，set path可以设置gf查找文件的路径


寄存器| 作用
---|---
`x`,`s`,`c`,`d`,`y`|  会执行删除，复制操作并将指定内容复制进入默认（无名）寄存器,y命令同时还会将内容复制进yank专门的寄存器0，可以通过"0p取出
`"{register}x/s/c/d/y`| 会将指定内容复制进入指定寄存器，看双引号后面的寄存器名称,小写寄存器会替换，大写寄存器会追加
`"{register}p`|将指定寄存器的内容粘贴出来
`:reg`|查看各个寄存器的内容
`"+ "*`|可以从系统剪切板中复制进去或出来（可能vim不支持）
`"=` |表达式寄存器，用来存表达式
`"%` |当前文件的文件名
`"#` |替换文件的文件名
`".` |上一次插入的文本
`":` |上一次执行的Ex命令
`"/` |上一次执行的搜索命令
`""` | 无名称寄存器
`p` | 在一般模式下为粘贴，在虚拟模式下为粘贴和复制，同时将替换的内容复制进入寄存器
`P` | 同p，根据寄存器的内容是行区域还是字符区域的会分别到字符前和上一行,而p是字符后和下一行
`gp` `Gp` | 同p,P将光标移至粘贴内容之后
- :set paste可以在从操作系统粘贴内容时不让vim自动缩进至与上行一致，可以让粘贴的内容显示正确，:set pastetoggle=<f5> 可以设置通过f5按键在paste模式和通常模式切换

宏命令(macro)| 作用
---|---
`q{register}`|开始记录命令到寄存器里面
`q`|结束记录
`:reg {register}`|查看寄存器中的内容
`(n)@{register}`| 执行寄存器中的命令,加n时，可以执行n次,
@@ | 执行最近调用寄存器的命令

- 当移动失败的时候，宏命令会终止，n次执行宏命令分‘串联’和‘并联’，串联的宏命令只要失败就会全部终止，并联的无影响，这里的串联和并联是为了理解，实际上串联的宏命令是一个，并联的宏命令是多个，但最终效果一致时，可以将多个看成一个。两个情况各有用处。
- 大写register会将内容追加入小写的register中
- 宏命令和表达式注册器和let等命令可以实现在行前面加行号等加数字
- 修改寄存器中的宏命令 可以先考出来 `:put a`,然后修改之后拷进去，不能使用"add,因为会将linux行尾的字符拷进去，可以使用`0"ay$ dd` 